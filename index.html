<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Actividad 2 ‚Äì Interface Design Lab ¬∑ Prototipos Unisabana</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#94a3b8;--accent:#7c3aed;--glass:rgba(255,255,255,0.04);}
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{margin:0;background:linear-gradient(180deg,#071021 0%,#0b1220 100%);color:#e6eef8;min-height:100vh}
    header{padding:24px 32px;display:flex;align-items:center;gap:16px}
    header h1{margin:0;font-size:20px}
    .container{display:grid;grid-template-columns:320px 1fr;gap:20px;padding:20px}
    nav{background:var(--card);border-radius:12px;padding:16px;height:calc(100vh - 132px);overflow:auto}
    nav .logo{font-weight:700;color:var(--accent);margin-bottom:12px}
    nav button{width:100%;padding:10px;border-radius:8px;border:0;background:transparent;color:var(--muted);text-align:left;margin-bottom:8px;cursor:pointer}
    nav button.active{background:linear-gradient(90deg, rgba(124,58,237,0.12), rgba(124,58,237,0.06));color:#fff}
    main{min-height:600px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:12px;padding:16px;margin-bottom:16px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    /* Layout for prototypes area */
    .proto-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    /* Shared small UI pieces */
    .row{display:flex;gap:8px;align-items:center}
    .muted{color:var(--muted);font-size:13px}
    /* Chat Agent */
    .chat{display:flex;flex-direction:column;height:520px}
    .chat .messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
    .bubble{max-width:78%;padding:10px 12px;border-radius:12px;background:var(--glass);}
    .bubble.user{align-self:flex-end;background:linear-gradient(90deg,#2b2f57, #24283f);}
    .chat .composer{display:flex;gap:8px;margin-top:8px}
    .composer input{flex:1;padding:10px;border-radius:8px;border:0;background:#08131f;color:#e6eef8}
    .composer button{padding:10px 12px;border-radius:8px;border:0;background:var(--accent);cursor:pointer}
    /* Campus Vision */
    .vision-preview{height:220px;background:#071428;border-radius:8px;display:flex;align-items:center;justify-content:center;border:1px dashed rgba(255,255,255,0.04)}
    .results-list{display:grid;gap:8px}
    .result-item{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px}
    .actions{display:flex;gap:8px;margin-top:8px}
    .actions button{padding:8px;border-radius:8px;border:0;background:var(--accent);cursor:pointer}
    /* Classification */
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.03);font-size:13px}
    .conf{font-weight:700}
    .feedback{display:flex;gap:8px}
    .badge{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.03);font-size:12px}
    /* Regression */
    .chart{height:160px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:8px;padding:8px;display:flex;align-items:flex-end;gap:6px}
    .bar{flex:1;margin:0 4px;border-radius:6px;background:linear-gradient(180deg, rgba(124,58,237,0.6), rgba(124,58,237,0.2));display:flex;align-items:flex-end;justify-content:center}
    .bar span{font-size:11px;padding:6px}
    /* Report */
    .report{white-space:pre-wrap;font-size:14px}
    footer{padding:12px 24px;color:var(--muted);font-size:13px}
    @media (max-width:980px){.container{grid-template-columns:1fr;}.proto-grid{grid-template-columns:1fr}.chat{height:420px}}
  </style>
</head>
<body>
  <header>
    <div style="width:48px;height:48px;border-radius:10px;background:linear-gradient(180deg,#111827,#0b1220);display:flex;align-items:center;justify-content:center">üß≠</div>
    <div>
      <h1>Actividad 2 ¬∑ Interface Design Lab ‚Äî Prototipos (HTML/CSS/JS)</h1>
      <div class="muted">Universidad de La Sabana ¬∑ Equipo: Agente Campus</div>
    </div>
  </header>

  <div class="container">
    <nav>
      <div class="logo">Agente Campus ¬∑ Prototipos</div>
      <button class="active" data-view="overview">Resumen y entrega</button>
      <button data-view="agent">Tu Agente (Chat)</button>
      <button data-view="vision">Campus Vision Companion</button>
      <button data-view="classif">Clasificaci√≥n aplicada</button>
      <button data-view="regress">Regresi√≥n aplicada</button>
      <hr style="margin:12px 0;border:none;height:1px;background:rgba(255,255,255,0.02)">
      <div class="muted">Abrir cada prototipo y usar los datos ficticios embebidos.</div>
    </nav>

    <main>
      <section id="overview" class="card active">
        <h2>Entregables</h2>
        <ul class="muted">
          <li>4 interfaces prototipo (HTML/CSS/JS) ‚Äî incluidas en este archivo.</li>
          <li>Datos ficticios documentados al final (ap√©ndice).</li>
          <li>Breves justificaciones (5‚Äì8 frases) por interfaz.</li>
          <li>Instrucciones: abrir este archivo en el navegador (local) y probar las interacciones.</li>
        </ul>
        <div style="margin-top:12px" class="card">
          <h3>C√≥mo usar</h3>
          <ol class="muted">
            <li>En la barra lateral seleccionar la UI que quieras probar.</li>
            <li>Interactuar con inputs: el prototipo funciona con datos ficticios embebidos.</li>
            <li>Copiar/pegar c√≥digo si quieres usarlo como base (puro HTML/CSS/JS, sin dependencias).</li>
          </ol>
        </div>
        <div style="margin-top:12px" class="card">
          <h3>Reporte (ap√©ndice breve)</h3>
          <div class="report">Al final de este documento encontrar√°s un ap√©ndice que resume: 1) definici√≥n del problema, 2) usuario objetivo, 3) dataset ficticio (campos y ejemplos), 4) reglas del agente y 5) justificaci√≥n de dise√±o por UI (5-8 frases cada una). Imprime o guarda como PDF si necesitas entregarlo.</div>
        </div>
      </section>

      <!-- AGENT -->
      <section id="agent" class="card" style="display:none">
        <h2>Tu Agente ‚Äî Interfaz de Chat</h2>
        <div class="proto-grid">
          <div>
            <div class="chat card">
              <div class="messages" id="chatMessages">
                <div class="bubble" style="opacity:0.9">Hola üëã Soy el Agente Campus. Puedo ayudar con tr√°mites, horarios y recursos. Prueba preguntando por: "horario sala B-201" o "solicitud de mantenimiento".</div>
              </div>
              <div class="composer">
                <input id="chatInput" placeholder="Escribe tu mensaje... (ej: horario sala B-201)" />
                <button id="sendBtn">Enviar</button>
              </div>
            </div>
          </div>
          <div>
            <div class="card">
              <h4>Memoria & Habilidades (resumen)</h4>
              <ul class="muted">
                <li>Memoria: consultas recientes, preferencias de notificaci√≥n.</li>
                <li>Base de conocimiento: cat√°logo de salones, tr√°mites administrativos, contactos.</li>
                <li>Habilidades: b√∫squeda por texto, extracci√≥n de metadatos, recomendaci√≥n de acciones.</li>
              </ul>
              <h4 style="margin-top:8px">Ejemplos r√°pidos</h4>
              <div class="muted">Prueba estos mensajes: <div class="badge">"Reservar sala B-201 para grupo"</div> <div class="badge">"¬øQu√© hay en el laboratorio L-3 hoy?"</div></div>
            </div>
            <div class="card" style="margin-top:12px">
              <h4>Justificaci√≥n (5‚Äì8 frases)</h4>
              <p class="muted">El agente en formato chat reproduce la experiencia conversacional esperada por estudiantes y personal administrativo. Prioriza respuestas r√°pidas y acciones (reservas, enlaces a formularios). La arquitectura de memoria permite recordar la √∫ltima sala consultada y sugerir atajos. La UI es compacta para integrar en la app m√≥vil o portal web. Usando datos ficticios incluidos, el prototipo demuestra: b√∫squeda de recursos, respuestas estructuradas y botones de acci√≥n para completar tr√°mites.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- VISION -->
      <section id="vision" class="card" style="display:none">
        <h2>Campus Vision Companion ‚Äî Flujos de captura y acciones</h2>
        <div class="proto-grid">
          <div>
            <div class="card">
              <h4>Simula tomar una foto / subir imagen</h4>
              <div class="vision-preview" id="visionPreview">Arrastra o selecciona una imagen (simulada).</div>
              <input type="file" id="visionInput" accept="image/*" style="margin-top:8px" />
              <div style="margin-top:8px" class="muted">El prototipo usa metadatos ficticios y coincidencias por nombre de ubicaci√≥n.</div>
            </div>
            <div class="card" id="visionActions" style="display:none">
              <h4>Resultados detectados</h4>
              <div class="results-list" id="visionResults"></div>
              <div class="actions">
                <button id="viewActivities">Ver actividades</button>
                <button id="reportIssue">Reportar incidente</button>
              </div>
            </div>
          </div>
          <div>
            <div class="card">
              <h4>Flujo y justificaci√≥n</h4>
              <p class="muted">Usuario objetivo: estudiante o docente que llega a un lugar sin saber qu√© actividades se realizan all√≠ o qu√© tr√°mites est√°n disponibles. Detonante: llegar a una sala/laboratorio o ver un letrero y querer informaci√≥n r√°pida. Respuesta del agente: con una foto detecta la ubicaci√≥n (metadata + coincidencia) y presenta: horarios, actividades programadas, responsables y formularios relacionados.</p>
              <h4 style="margin-top:8px">Ejemplo r√°pido</h4>
              <div class="muted">Sube una imagen y el prototipo devolver√° datos ficticios como: sala B-201 ‚Üí "Clase: Fundamentos de Econom√≠a, 8:00‚Äì9:30"; tr√°mites: "Solicitar equipo adicional"; contacto: "Soporte AV: soporte@unisabana.edu.co"</div>
            </div>
          </div>
        </div>
      </section>

      <!-- CLASSIFICATION -->
      <section id="classif" class="card" style="display:none">
        <h2>Clasificaci√≥n aplicada ‚Äî Tickets y feedback</h2>
        <div class="proto-grid">
          <div>
            <div class="card">
              <h4>Enviar nuevo ticket</h4>
              <input id="ticketTitle" placeholder="T√≠tulo del ticket" style="width:100%;padding:8px;border-radius:8px;border:0;background:#071427;margin-bottom:8px">
              <textarea id="ticketDesc" placeholder="Descripci√≥n..." style="width:100%;padding:8px;border-radius:8px;border:0;background:#071427;min-height:80px"></textarea>
              <div style="display:flex;gap:8px;margin-top:8px">
                <button id="createTicket">Enviar ticket</button>
                <button id="loadSample">Cargar tickets de ejemplo</button>
              </div>
            </div>
            <div class="card" style="margin-top:12px">
              <h4>Dataset sint√©tico (preview)</h4>
              <table>
                <thead><tr><th>ID</th><th>T√≠tulo</th><th>Clase</th><th>Conf.</th></tr></thead>
                <tbody id="ticketsPreview"></tbody>
              </table>
            </div>
          </div>
          <div>
            <div class="card">
              <h4>Detalle & correcci√≥n</h4>
              <div id="ticketDetail" class="muted">Selecciona un ticket para ver la predicci√≥n de clase y dejar retroalimentaci√≥n correctiva.</div>
            </div>
            <div class="card" style="margin-top:12px">
              <h4>Justificaci√≥n (5‚Äì8 frases)</h4>
              <p class="muted">La clasificaci√≥n automatiza el ruteo inicial de solicitudes (mantenimiento, soporte acad√©mico, financiero). Mostrar clases con niveles de confianza permite a un operador validar r√°pidamente y corregir errores, mejorando la calidad del dataset. La UI ofrece retroalimentaci√≥n correctiva que reentrena conceptualmente el sistema (simulado aqu√≠). Esto reduce tiempos de respuesta y asignaciones erradas, problema real en universidades con pocas ventanas de atenci√≥n.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- REGRESSION -->
      <section id="regress" class="card" style="display:none">
        <h2>Regresi√≥n aplicada ‚Äî Predicci√≥n de aforo (biblioteca)</h2>
        <div class="proto-grid">
          <div>
            <div class="card">
              <h4>Ingresar variables para predicci√≥n</h4>
              <label class="muted">D√≠a de semana</label>
              <select id="daySelect" style="width:100%;padding:8px;border-radius:8px;border:0;background:#071427;margin-bottom:8px">
                <option value="1">Lunes</option><option value="2">Martes</option><option value="3">Mi√©rcoles</option><option value="4">Jueves</option><option value="5">Viernes</option>
              </select>
              <label class="muted">Hora (24h)</label>
              <input id="hourInput" type="number" min="7" max="22" value="10" style="width:100%;padding:8px;border-radius:8px;border:0;background:#071427;margin-bottom:8px">
              <label class="muted">Evento cercano (0/1)</label>
              <select id="eventSelect" style="width:100%;padding:8px;border-radius:8px;border:0;background:#071427;margin-bottom:8px"><option value="0">No</option><option value="1">S√≠</option></select>
              <div style="display:flex;gap:8px"><button id="predictBtn">Predecir aforo</button><button id="loadHist">Cargar hist√≥rico</button></div>
            </div>
            <div class="card" style="margin-top:12px">
              <h4>Predicci√≥n</h4>
              <div class="muted">Predicci√≥n (modelo simple): <strong id="predValue">‚Äî</strong> personas</div>
              <div style="margin-top:8px" class="chart" id="chartContainer"></div>
              <div style="margin-top:8px" class="muted">Cuando la predicci√≥n difiere de la media hist√≥rica por m√°s de 25%, el agente sugiere acciones (abrir salas sat√©lite, notificar bibliotecarios).</div>
            </div>
          </div>
          <div>
            <div class="card">
              <h4>Hist√≥rico (ficticio)</h4>
              <table>
                <thead><tr><th>Fecha</th><th>Hora</th><th>Aforo real</th></tr></thead>
                <tbody id="histBody"></tbody>
              </table>
            </div>
            <div class="card" style="margin-top:12px">
              <h4>Justificaci√≥n (5‚Äì8 frases)</h4>
              <p class="muted">Predicci√≥n de aforo ayuda a gestionar espacios y recursos en tiempo real. Con variables simples (d√≠a, hora, eventos) el agente estima ocupaci√≥n y compara con el hist√≥rico. Al detectar desviaciones importantes, propone contramedidas antes de que se saturen servicios. La UI permite inspecci√≥n r√°pida de entradas y ver el hist√≥rico para auditar la predicci√≥n.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- APPENDIX: Datos ficticios y documentaci√≥n breve -->
      <section id="appendix" class="card">
        <h2>Ap√©ndice: Datos ficticios y documentaci√≥n (1‚Äì2 p√°ginas)</h2>
        <div class="report muted">
PROBLEMAS DEFINIDOS (resumen):
1) Falta de informaci√≥n contextual en campus (docentes/estudiantes llegan a un sal√≥n y no saben actividades disponibles).
2) Tickets mal ruteados y largos tiempos de respuesta.
3) Incapacidad de estimar aforo para gestionar espacios.

DATASETS FICTICIOS (campos y ejemplos):

A) Cat√°logo de ubicaciones (used por Chat & Vision)
- id: "B-201"
- nombre: "Sala B-201"
- tipo: "Aula"
- capacidad: 40
- actividades: [{"titulo":"Fundamentos de Economia","inicio":"08:00","fin":"09:30","responsable":"Lina Torres"}]
- contactos: {"soporte_av":"soporte@unisabana.edu.co"}

B) Tickets (clasificaci√≥n)
- id: 101
- titulo: "Proyector no enciende B-201"
- descripcion: "Al conectar HDMI no aparece imagen"
- clase_esperada: "Mantenimiento AV"
- prediccion: "Mantenimiento AV"
- confianza: 0.87
- estado: "abierto"

Otros ejemplos: ID 102 (Falla red WiFi), 103 (Solicitud de apoyo financiero), 104 (Propuesta de investigaci√≥n)

C) Hist√≥rico de aforo (biblioteca)
- fecha: "2025-10-20"
- hora: 10
- aforo_real: 85
- evento_cercano: 0

Reglas del agente (simuladas):
- Si predicci√≥n de clase tiene confianza < 0.6 ‚Üí marcar para revisi√≥n humana.
- Si predicci√≥n de aforo > media_hist*1.25 ‚Üí sugerir abrir salas alternas.
- Si usuario pregunta por "reservar" ‚Üí mostrar formulario de reserva simulado.

JUSTIFICACIONES DE DISE√ëO (5-8 frases por UI):
- Tu Agente (Chat): UI conversacional porque estudiantes/funcionarios prefieren chat para consultas r√°pidas. Botones de acci√≥n integrados (reservar, reportar) reducen fricci√≥n. Memoria contextual sugiere atajos personalizables. Dise√±o compacto facilita implementaci√≥n en app m√≥vil.

- Campus Vision Companion: Fotografiar ubicaci√≥n reduce fricci√≥n cuando el usuario no conoce el c√≥digo/nombre del sal√≥n. Mostrar actividades y tr√°mites contextuales acelera la toma de decisiones en sitio. Acciones inmediatas (ver actividades, reportar) cierran el ciclo.

- Clasificaci√≥n aplicada: Mostrar clase + confianza mejora supervisi√≥n humana. Campo de retroalimentaci√≥n permite corregir etiquetas y mejorar el clasificador. Reducir assignments err√≥neos acelera la resoluci√≥n operativa.

- Regresi√≥n aplicada: Predicci√≥n de aforo y comparaci√≥n con hist√≥rico permite tomar acciones preventivas. Entrada de variables simples mantiene la interfaz accesible para personal no t√©cnico. Visualizar hist√≥rico facilita la auditor√≠a.

INSTRUCCIONES DE ENTREGA
- Este archivo es un prototipo funcional en HTML/CSS/JS. √Åbrelo localmente en cualquier navegador moderno. Copia el contenido a un repositorio o incl√∫yelo en la entrega como archivo HTML. 

FIN DEL AP√âNDICE
        </div>
      </section>

    </main>
  </div>
  <footer>Prototipo generado para Actividad 2 ‚Äî Interface Design Lab ¬∑ Universidad de La Sabana</footer>

  <script>
    // Simple view navigation
    document.querySelectorAll('nav button').forEach(btn=>btn.addEventListener('click', (e)=>{
      document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
      e.currentTarget.classList.add('active');
      const view = e.currentTarget.dataset.view;
      document.querySelectorAll('main section').forEach(s=>s.style.display='none');
      document.getElementById(view).style.display='block';
      window.scrollTo(0,0);
    }));

    // -- CHAT AGENT (mock responses using dummy data) --
    const catalog = {
      "B-201":{id:'B-201',nombre:'Sala B-201',tipo:'Aula',capacidad:40,activities:[{titulo:'Fundamentos de Economia',inicio:'08:00',fin:'09:30',responsable:'Lina Torres'}],contactos:{soporte_av:'soporte@unisabana.edu.co'}}
    };
    const chatMessages = document.getElementById('chatMessages');
    document.getElementById('sendBtn').addEventListener('click',()=>{
      const input = document.getElementById('chatInput');
      if(!input.value.trim()) return;
      const text = input.value.trim();
      const userBubble = document.createElement('div'); userBubble.className='bubble user'; userBubble.textContent=text; chatMessages.appendChild(userBubble);
      input.value=''; chatMessages.scrollTop = chatMessages.scrollHeight;
      // Very simple intent detection
      setTimeout(()=>{
        let resp='Lo siento, no entend√≠. Prueba: "horario sala B-201" o "reportar proyector"';
        if(/horario|sala|B-201/i.test(text)){
          const loc=catalog['B-201'];
          resp = `Ubicaci√≥n: ${loc.nombre} (${loc.tipo}) ‚Äî Capacidad ${loc.capacidad}. Actividad pr√≥xima: ${loc.activities[0].titulo} ${loc.activities[0].inicio}-${loc.activities[0].fin} (Resp: ${loc.activities[0].responsable}). Acciones: [Reservar] [Reportar incidencia]`;
        }
        const bot = document.createElement('div'); bot.className='bubble'; bot.textContent=resp; chatMessages.appendChild(bot); chatMessages.scrollTop = chatMessages.scrollHeight;
      },700);
    });

    // -- VISION (simulate metadata matching) --
    const visionInput = document.getElementById('visionInput');
    const visionPreview = document.getElementById('visionPreview');
    const visionResults = document.getElementById('visionResults');
    visionInput.addEventListener('change',(e)=>{
      const file = e.target.files[0];
      visionPreview.textContent = file ? file.name : 'Arrastra o selecciona una imagen';
      // fake metadata extraction
      setTimeout(()=>{
        document.getElementById('visionActions').style.display='block';
        visionResults.innerHTML='';
        const fake = {locationId:'B-201',confidence:0.92,metadata:{gps:'4.800,-74.044',timestamp:'2025-10-31T09:00:00'}};
        const item = document.createElement('div'); item.className='result-item';
        item.innerHTML = `<strong>${fake.locationId}</strong> ¬∑ Confianza ${Math.round(fake.confidence*100)}%<br><span class='muted'>Metadatos: ${fake.metadata.gps} ‚Äî ${fake.metadata.timestamp}</span>`;
        visionResults.appendChild(item);
      },600);
    });
    document.getElementById('viewActivities').addEventListener('click',()=>{
      alert('Actividades para B-201:\n‚Ä¢ Fundamentos de Economia 08:00‚Äì09:30\n‚Ä¢ Reserva disponible 14:00‚Äì16:00');
    });
    document.getElementById('reportIssue').addEventListener('click',()=>{alert('Formulario de reporte (simulado) enviado. ID ticket: 201');});

    // -- CLASSIFICATION --
    let tickets = [
      {id:101,titulo:'Proyector no enciende B-201',descripcion:'Al conectar HDMI no aparece imagen',prediccion:'Mantenimiento AV',confianza:0.87,estado:'abierto'},
      {id:102,titulo:'WiFi intermitente planta 3',descripcion:'Se cae la conexi√≥n constantemente',prediccion:'Soporte TI',confianza:0.78,estado:'abierto'},
      {id:103,titulo:'Solicitud de apoyo financiero',descripcion:'Ayuda para matr√≠cula',prediccion:'Asuntos Estudiantiles',confianza:0.64,estado:'abierto'}
    ];
    const ticketsPreview = document.getElementById('ticketsPreview');
    function renderTickets(){
      ticketsPreview.innerHTML='';
      tickets.forEach(t=>{
        const tr = document.createElement('tr');
        tr.innerHTML=`<td>${t.id}</td><td>${t.titulo}</td><td><span class='badge'>${t.prediccion}</span></td><td class='conf'>${Math.round(t.confianza*100)}%</td>`;
        tr.style.cursor='pointer';
        tr.addEventListener('click',()=>showTicketDetail(t));
        ticketsPreview.appendChild(tr);
      });
    }
    function showTicketDetail(t){
      const det = document.getElementById('ticketDetail');
      det.innerHTML = `<strong>ID ${t.id} ‚Äî ${t.titulo}</strong><p class='muted'>Predicci√≥n: <span class='badge'>${t.prediccion}</span> ¬∑ Confianza: ${Math.round(t.confianza*100)}%</p>
      <label class='muted'>Si la predicci√≥n es incorrecta, selecciona la clase correcta:</label>
      <div class='feedback'><select id='correctClass'><option>Mantenimiento AV</option><option>Soporte TI</option><option>Asuntos Estudiantiles</option><option>Investigaci√≥n</option></select><button id='applyCorrection'>Aplicar</button></div>
      <p class='muted'>Estado: ${t.estado}</p>`;
      document.getElementById('applyCorrection').addEventListener('click',()=>{
        const newClass = document.getElementById('correctClass').value;
        t.prediccion = newClass; t.confianza = 0.99;
        alert('Correcci√≥n aplicada (simulada). El dataset ficticio se actualiz√≥.'); renderTickets(); showTicketDetail(t);
      });
    }
    document.getElementById('loadSample').addEventListener('click',()=>{renderTickets();});
    document.getElementById('createTicket').addEventListener('click',()=>{
      const title = document.getElementById('ticketTitle').value||'Sin t√≠tulo';
      const desc = document.getElementById('ticketDesc').value||'';
      const newId = Math.max(...tickets.map(t=>t.id))+1;
      const predicted = title.toLowerCase().includes('proyector')? 'Mantenimiento AV' : 'Soporte TI';
      const conf = predicted==='Mantenimiento AV'?0.82:0.6;
      tickets.push({id:newId,titulo:title,descripcion:desc,prediccion:predicted,confianza:conf,estado:'abierto'});
      alert('Ticket creado (simulado) ID: '+newId);
      renderTickets();
    });
    renderTickets();

    // -- REGRESSION (simple linear model simulado) --
    let hist = [
      {fecha:'2025-10-20',hora:9,aforo:60,evento:0},
      {fecha:'2025-10-20',hora:10,aforo:85,evento:0},
      {fecha:'2025-10-21',hora:10,aforo:90,evento:1},
      {fecha:'2025-10-22',hora:11,aforo:70,evento:0},
      {fecha:'2025-10-23',hora:10,aforo:95,evento:1}
    ];
    function renderHist(){
      const body = document.getElementById('histBody'); body.innerHTML='';
      hist.forEach(h=>{const r=document.createElement('tr'); r.innerHTML=`<td>${h.fecha}</td><td>${h.hora}:00</td><td>${h.aforo}</td>`; body.appendChild(r);});
      // chart bars
      const chart = document.getElementById('chartContainer'); chart.innerHTML='';
      const max = Math.max(...hist.map(h=>h.aforo),100);
      hist.slice(-7).forEach(h=>{const bar=document.createElement('div');bar.className='bar';bar.style.height=(h.aforo/max*100)+'%';bar.innerHTML=`<span>${h.aforo}</span>`;chart.appendChild(bar);});
    }
    document.getElementById('loadHist').addEventListener('click',()=>{renderHist();});
    document.getElementById('predictBtn').addEventListener('click',()=>{
      const day = Number(document.getElementById('daySelect').value);
      const hour = Number(document.getElementById('hourInput').value);
      const evt = Number(document.getElementById('eventSelect').value);
      // Simple heuristic model: base + hour factor + event
      const base = 40 + (day*5);
      const hourFactor = (hour-7)*6;
      const eventBoost = evt?25:0;
      const prediction = Math.round(base + hourFactor + eventBoost);
      document.getElementById('predValue').textContent = prediction;
      // compare to historical mean for same hour
      const sameHour = hist.filter(h=>h.hora===hour);
      const mean = sameHour.length? Math.round(sameHour.reduce((s,x)=>s+x.aforo,0)/sameHour.length): 70;
      if(prediction > mean*1.25){
        alert('Alerta: la predicci√≥n excede la media hist√≥rica en m√°s del 25%. Sugerencia: habilitar salas sat√©lite o notificar bibliotecarios.');
      }
    });
    renderHist();
  </script>
</body>
</html>
